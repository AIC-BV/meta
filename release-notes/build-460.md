# Build 460 (WIP):

## UX/UI Improvements:
- Moved CodeEditor's full screen buttons to the bottom of the widget.
- Fixed keyboard support for checkboxes
- Added keyboard support to lists
- Improved the UX of checkbox lists "Select All", "Select None" bulk actions
- Changed the cursor to be a `grab` cursor when hovering over table headers to indicate that they are a scrollable container
- Made the record "Delete" button consistent across the core backend controllers by replacing User Roles & User Groups delete buttons with the standard trash can icon button
- Fixed issue where form tabs would initially be unstyled until the JS had loaded and initialized them
- Added support for making radio fields display inline by adding `cssClass: 'inline-options'` to their properties
- Added auto detection of the field `required` property for fields that have `required_if` model validation rules

## API Changes:
- `media.file.upload` event now passes the `$path` argument by reference.
- Added ability to specify a LESS file to be used as a default backend brand CSS override with the config item `brand.customLessPath`
- Updated references to deprecated `event.which` and other methods of determining the selected keys to the new `event.key`
- Added new method `removePermission($owner, $code)` to the BackendAuth manager class to enable plugins to dynamically remove permissions from the available list registered with the BackendAuth manager class.
- Added support for SparkPost mail driver
- Added support for a string option to be provided to `October\Rain\Network\Http->setOption($option, $value)` as long as it corresponds to a valid `CURLOPT_` constant
- Added `getConfig($value, $default = null)` method to the `Backend\Classes\ListColumn` class to mirror what's available on the `Backend\Classes\FormField` class
- Added `order` option to the `relation` FormWidget to allow relation options to be ordered by a custom order statement.
- Added `email` field type (`type: email`)
- Documented newly available `services.mailgun.endpoint` config item in `config/services.php`
- Replaced existing handling of disabling CloudFlare's rocket loader on backend scripts by adding a new event (`system.assets.beforeAddAsset`) that is listened to by the `HeathDutton.CloudFlare` plugin. Recommend any CloudFlare users using Rocket Loader to use that plugin going forward
- Added support for `permissions` property on form fields, list columns, and list filter scopes. Property supports either a single string or an array of permissions that the current backend user must have access to at least one of in order to access the field / column / filter scope.

## Bug Fixes:
- Reverted improvements to table column width handling on Chrome (specifically for long unbroken text values in columns) introduced in Build 444 as it was causing other issues on mobile.
- Reduced inconsistencies with results generated by `\October\Rain\Database\Attach\Resizer` class, specifically for .gif images by processing .gif images with `imagescale()` instead of `imagecopyresampled()`
- Fixed an issue where attempting to modify the available Settings Items through the `SettingsManager` could fail if a user wasn't provided to `filterItemPermissions()` at that point in the request
- Removed caching of Theme configuration, this is now handled by `YAML::parseFile()` caching which simplifies the Theme processing code and fixes some bugs related to cache invalidation
- Fixed issue with trying to create multiple CMS templates at once
- Fixed issue where the cached classes file would not be removed along with the cached services file when running `php artisan clear-compiled`
- Fixed issue with PHP 7.0 compatibility introduced with new `PreferenceMaker` trait in Build 457
- Fixed issue where message subjects set in Mail callback functions were not available to the system mail layouts because the layouts were generated before the callback was called. Note that this was accomplished by calling the callback before content is added to the message instead of after, so it could be considered a breaking change
- Fixed styling for switch fields that are required
- Return a 403 response when a frontend AJAX request fails the CSRF check instead of failing silently
- Fixed bug where '0' was returned as NULL from `$this->param()` but returned as `'0'` from `{{ this.param.slug }}`
- Fixed issue where updating a record through a RelationController would not trigger a change event on the RelationController field like creating a record would by triggering the change event on successful update
- Fixed issue where FormWidgets in Repeaters that made orphaned AJAX requests (AJAX requests fired on an element outside of the repeater's markup structure, ex. from a popup modal instead) were not being initialized which was causing the orphaned requests to fail
- Fixed issue where the `databaseTemplates` feature from Build 456 wouldn't support templates in subfolders. Nesting limit is still 2 (`/template-type/subfolder1/template.htm`) but the issue where it was just 1 when `databaseTemplates` was enabled has been fixed.

## Security Improvements
- Prevent tabnabbing that could theoretically occur from a backend user clicking the "Preview" button in the backend navigation and having the tab taken over by the frontend site
- Added new global JS function `ocJSON()` to framework.js for parsing loose JSON safely

## Translation Improvements:
- Improved Polish translation
- Improved Chinese translation
- Improved French translation
- Improved Dutch translation
- Improved Portuguese translation
- Improved Hungarian translation
- Improved Russian translation
- Added a translation key for the Repeater's "Add new item" text (`backend::lang.repeater.add_new_item`)

## Performance Improvements:
- Very minor performance improvement calling `JSON.parse()` instead of `$.parseJSON()` in core JS
- Added support for lazy loading the backend navigation menu icons / images
- Added caching of `YAML::parseFile()` when debug mode is disabled. The cache key is prefixed with `yaml::` and is generated from the path provided along with the last modified time of that file to ensure that it's always properly invalidated. Cache is stored for a maximum of 30 days.
- In instances where there is only one theme present and its code matches the code set in cms.activeTheme the database will no longer be asked what the currently active theme is, it will just be assumed that the only one present is the active theme.

## Community Improvements:
- Switched to using GitHub actions instead of Travis for CI on the main octobercms/october and octobercms/library repositories
- Added GitHub action to auto archive issues / pull requests after a month of inactivity
- Added initial frontend testing suite under `tests/js`

## Dependencies
- Updated Dropzone from v4.0.1 to v5.5.1
- Updated Modernizr from v3.6.0 to v3.7.1
- Updated jQuery.Mousewheel from v3.1.9 to v3.2.0
- Updated Mustache from v2.0.0 to v2.3.2
